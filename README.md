# Library API

## Комментарии
В модулях book-storage-service и book-tracker-service в папках src/main/java/resources находится папка **/certs**, в которой хранятся ключи для создания токена аутентификации<br/>
В реальных проектах приватные данные **ЗАПРЕЩАЕТСЯ** хранить в папках проекта, лучше всего это делать в переменных средах

## Технологии
- **Java 17**
- **Spring Boot 3.x, Security**
- **Hibernate (JPA)**: работа с базой данных
- **Swagger**: для удобства документации
- **MySQL**: реляционная база данных
- **Maven**: управление зависимостями
- **Docker**: для контейнеризации
- **Kafka**: для асинхронных запросов
- **JWT**: аутентификация
- **Lombok**: для сокращения кода

## Установка и запуск проекта

### Предварительные требования
Перед началом убедитесь, что у вас установлено:
1. [Java Development Kit (JDK)] версии 17 или выше
2. [MySQL] для базы данных
3. [Docker] для запуска контейнера Kafka
4. [Git] для клонирования репозитория
5. Любая из сред разработки (здесь использовалась IntelliJ Idea)

---

### Шаг 1: Клонирование репозитория
```bash
git clone https://github.com/Badyusha/ModsenTest.git
```
```bash
cd ModsenTest
```

### Шаг 2: Создание базы данных с таблицами
Создайте подключение для пользователя с username = **root**, password = **root**, hostname/IP = **localhost**, port = **3306**<br/>
Скопируйте содержимое файла /ModsenTest/init.sql и выполните в любой СУБД или консоли

### Шаг 3: Установка зависимостей
Убедитесь, что все зависимости в дочернем файле **pom.xml** установлены<br/>
Установите при необходимости

### Шаг 4: Запуск контейнера Kafka
Перейдите в папку /docker в консоли и выполните команду
```bash
sudo docker-compose up -d
```

Должны запуститься два контейнера: docker-kafka-1, docker-zookeeper-1

### Шаг 5: Настройка файлов application.properties
Убедитесь, что username, password и url в файле совпадают с ранее созданным подключением для пользователя<br/>
Больше желательно ничего не менять

### Шаг 6: Запуск проекта
Откройте среду разработки и запустите приложение **BookStorageApplication*, следом за ним **BookTrackerApplication**.

## Тестирование проекта

1. Была разработана Postman коллекция для тестирования API по адресу https://restless-equinox-254476.postman.co/workspace/My-Workspace~8efa08f2-4a4a-43ef-8f66-e859d4f6bd77/collection/40425289-72251ca7-8ab7-4135-8eaa-b00557297484?action=share&creator=40425289
2. Перед тестированием API необходимо сгенерировать токен аутентификации по адресу **localhost:8080/token/generate**<br/>
Запрос на получение токена уже предоставлен в коллекции под названием Get token<br/>
3. В последующих запросах, за исключением получения самого токена, в заголовок Authentication -> Bearer Token необходимо передавать полученный токен
4. Также можно использовать документирование Swagger по ссылкам http://localhost:8080/swagger-ui/index.html и http://localhost:8081/swagger-ui/index.html для сервисов book-storage-service и book-tracker-service соответственно
